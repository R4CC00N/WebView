<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <style>
      #toggleMode {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 999;
        padding: 10px;
        background: rgba(0,0,0,0.7);
        color: white;
        border: none;
        font-size: 16px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <button id="toggleMode">Cambiar a AR</button>

    <a-scene id="scene" xr-mode-ui="enabled: false">
      <a-assets>
        <video id="video" autoplay loop src="What's New week_25.mp4"></video>
      </a-assets>

      <a-video src="#video" width="16" height="9" position="0 1 -10"></a-video>

      <a-box position="-3.5 1 -3" rotation="0 0 45" color="#4CC3D9"></a-box>
      <a-sphere position="0 -0.5 -5" radius="1" color="#EF2D5E" opacity="0.5"></a-sphere>
      <a-cylinder position="3.5 1 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
      <a-plane position="0 -1.5 -4" rotation="-90 0 0" width="10" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>

    <script>
      const scene = document.querySelector("a-scene");
      const btn = document.getElementById("toggleMode");

      let isAR = false;

      btn.addEventListener("click", async () => {
        const renderer = scene.renderer;
        const xr = renderer.xr;

        if (!navigator.xr) {
          alert("Tu navegador no soporta WebXR");
          return;
        }

        if (isAR) {
          // Cambiar a VR
          await xr.setSession(null);
          xr.setSession(await navigator.xr.requestSession("immersive-vr"));
          btn.innerText = "Cambiar a AR";
          isAR = false;
        } else {
          // Cambiar a AR
          await xr.setSession(null);
          xr.setSession(await navigator.xr.requestSession("immersive-ar", {
            requiredFeatures: ["local-floor"]
          }));
          btn.innerText = "Cambiar a VR";
          isAR = true;
        }
      });
    </script>
  </body>
</html>
